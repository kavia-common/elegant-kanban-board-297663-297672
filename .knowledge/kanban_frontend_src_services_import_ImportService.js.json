{"is_source_file": true, "format": "JavaScript", "description": "This source file defines the ImportService class which handles importing, validating, merging, and parsing board data from JSON and CSV formats, including file reading capabilities and ID remapping logic.", "external_files": ["FileReader"], "external_methods": ["FileReader.readAsText"], "published": ["getImportService", "ImportService"], "classes": [{"name": "ImportService", "description": "A class responsible for importing and validating board data from JSON and CSV formats, with utility methods for parsing, ID generation, and data merging."}], "methods": [{"name": "importFromJSON(jsonString)", "description": "Parses a JSON string to import board data, validates structure, and returns the data with metadata.", "scope": "ImportService", "scopeKind": "class"}, {"name": "importFromCSV(csvString, existingColumns = [])", "description": "Parses a CSV string to import cards, mapping CSV columns to card properties.", "scope": "ImportService", "scopeKind": "class"}, {"name": "readFile(file)", "description": "Reads a File object asynchronously and returns its content as a text string.", "scope": "ImportService", "scopeKind": "class"}, {"name": "importFromFile(file)", "description": "Reads a file and delegates to JSON or CSV import methods based on file extension.", "scope": "ImportService", "scopeKind": "class"}, {"name": "validateImportData(data)", "description": "Validates imported data for required fields and structure.", "scope": "ImportService", "scopeKind": "class"}, {"name": "mergeData", "description": "Merges imported data with existing data, with options to replace or append and generate new IDs."}, {"name": "validateJSONStructure", "description": "Checks the presence and validity of essential JSON fields like version, board, columns, and cards."}, {"name": "parseCSVLine", "description": "Parses a CSV line into an array of fields, handling quotes and commas."}, {"name": "mapCSVRowToCard", "description": "Maps CSV row values to a card object based on headers."}, {"name": "generateNewIds", "description": "Creates a mapping of old IDs to new unique IDs for columns and cards."}, {"name": "remapIds", "description": "Remaps IDs in items and their references based on a provided ID map."}, {"name": "generateId", "description": "Generates a unique ID string based on timestamp and random components."}], "calls": ["JSON.parse", "this.validateJSONStructure", "this.readFile", "this.importFromJSON", "this.importFromCSV", "this.parseCSVLine", "this.mapCSVRowToCard", "this.generateId", "this.generateNewIds", "this.remapIds"], "search-terms": ["ImportService", "JSON import", "CSV import", "board data import", "file reading", "protocol validation", "ID remapping", "merge imported data", "CSV parsing", "file extension handling"], "state": 2, "file_id": 79, "knowledge_revision": 210, "git_revision": "f3ed44b22dde9c597ddeaff1880f8e8d1a7b31af", "ctags": [{"_type": "tag", "name": "ImportService", "path": "/home/kavia/workspace/code-generation/elegant-kanban-board-297663-297672/kanban_frontend/src/services/import/ImportService.js", "pattern": "/^class ImportService {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "board", "path": "/home/kavia/workspace/code-generation/elegant-kanban-board-297663-297672/kanban_frontend/src/services/import/ImportService.js", "pattern": "/^      board: replaceExisting ? importedData.board : existingData.board,$/", "language": "JavaScript", "kind": "property", "scope": "merged", "scopeKind": "class"}, {"_type": "tag", "name": "card", "path": "/home/kavia/workspace/code-generation/elegant-kanban-board-297663-297672/kanban_frontend/src/services/import/ImportService.js", "pattern": "/^    const card = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "cards", "path": "/home/kavia/workspace/code-generation/elegant-kanban-board-297663-297672/kanban_frontend/src/services/import/ImportService.js", "pattern": "/^      cards: replaceExisting ? importedData.cards : [...existingData.cards]$/", "language": "JavaScript", "kind": "property", "scope": "merged", "scopeKind": "class"}, {"_type": "tag", "name": "char", "path": "/home/kavia/workspace/code-generation/elegant-kanban-board-297663-297672/kanban_frontend/src/services/import/ImportService.js", "pattern": "/^      const char = line[i];$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "columns", "path": "/home/kavia/workspace/code-generation/elegant-kanban-board-297663-297672/kanban_frontend/src/services/import/ImportService.js", "pattern": "/^      columns: replaceExisting ? importedData.columns : [...existingData.columns],$/", "language": "JavaScript", "kind": "property", "scope": "merged", "scopeKind": "class"}, {"_type": "tag", "name": "createdAt", "path": "/home/kavia/workspace/code-generation/elegant-kanban-board-297663-297672/kanban_frontend/src/services/import/ImportService.js", "pattern": "/^      createdAt: new Date().toISOString()$/", "language": "JavaScript", "kind": "property", "scope": "card", "scopeKind": "class"}, {"_type": "tag", "name": "current", "path": "/home/kavia/workspace/code-generation/elegant-kanban-board-297663-297672/kanban_frontend/src/services/import/ImportService.js", "pattern": "/^    let current = '';$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "getImportService", "path": "/home/kavia/workspace/code-generation/elegant-kanban-board-297663-297672/kanban_frontend/src/services/import/ImportService.js", "pattern": "/^export const getImportService = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/elegant-kanban-board-297663-297672/kanban_frontend/src/services/import/ImportService.js", "pattern": "/^      id: this.generateId(),$/", "language": "JavaScript", "kind": "property", "scope": "card", "scopeKind": "class"}, {"_type": "tag", "name": "idMap", "path": "/home/kavia/workspace/code-generation/elegant-kanban-board-297663-297672/kanban_frontend/src/services/import/ImportService.js", "pattern": "/^    const idMap = {};$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "importFromCSV", "path": "/home/kavia/workspace/code-generation/elegant-kanban-board-297663-297672/kanban_frontend/src/services/import/ImportService.js", "pattern": "/^  importFromCSV(csvString, existingColumns = []) {$/", "language": "JavaScript", "kind": "method", "signature": "(csvString, existingColumns = [])", "scope": "ImportService", "scopeKind": "class"}, {"_type": "tag", "name": "importFromFile", "path": "/home/kavia/workspace/code-generation/elegant-kanban-board-297663-297672/kanban_frontend/src/services/import/ImportService.js", "pattern": "/^  async importFromFile(file) {$/", "language": "JavaScript", "kind": "method", "signature": "(file)", "scope": "ImportService", "scopeKind": "class"}, {"_type": "tag", "name": "importFromJSON", "path": "/home/kavia/workspace/code-generation/elegant-kanban-board-297663-297672/kanban_frontend/src/services/import/ImportService.js", "pattern": "/^  importFromJSON(jsonString) {$/", "language": "JavaScript", "kind": "method", "signature": "(jsonString)", "scope": "ImportService", "scopeKind": "class"}, {"_type": "tag", "name": "importServiceInstance", "path": "/home/kavia/workspace/code-generation/elegant-kanban-board-297663-297672/kanban_frontend/src/services/import/ImportService.js", "pattern": "/^    importServiceInstance = new ImportService();$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "importServiceInstance", "path": "/home/kavia/workspace/code-generation/elegant-kanban-board-297663-297672/kanban_frontend/src/services/import/ImportService.js", "pattern": "/^let importServiceInstance = null;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "inQuotes", "path": "/home/kavia/workspace/code-generation/elegant-kanban-board-297663-297672/kanban_frontend/src/services/import/ImportService.js", "pattern": "/^    let inQuotes = false;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "merged", "path": "/home/kavia/workspace/code-generation/elegant-kanban-board-297663-297672/kanban_frontend/src/services/import/ImportService.js", "pattern": "/^    const merged = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "readFile", "path": "/home/kavia/workspace/code-generation/elegant-kanban-board-297663-297672/kanban_frontend/src/services/import/ImportService.js", "pattern": "/^  readFile(file) {$/", "language": "JavaScript", "kind": "method", "signature": "(file)", "scope": "ImportService", "scopeKind": "class"}, {"_type": "tag", "name": "result", "path": "/home/kavia/workspace/code-generation/elegant-kanban-board-297663-297672/kanban_frontend/src/services/import/ImportService.js", "pattern": "/^    const result = [];$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "validateImportData", "path": "/home/kavia/workspace/code-generation/elegant-kanban-board-297663-297672/kanban_frontend/src/services/import/ImportService.js", "pattern": "/^  validateImportData(data) {$/", "language": "JavaScript", "kind": "method", "signature": "(data)", "scope": "ImportService", "scopeKind": "class"}], "hash": "ff737f2f826a6519ab003505ca568cef", "format-version": 4, "code-base-name": "kanban_frontend", "filename": "kanban_frontend/src/services/import/ImportService.js", "fields": [{"name": "board: replaceExisting ? importedData.board : existingData.board,", "scope": "merged", "scopeKind": "class", "description": "unavailable"}, {"name": "cards: replaceExisting ? importedData.cards : [...existingData.cards]", "scope": "merged", "scopeKind": "class", "description": "unavailable"}, {"name": "columns: replaceExisting ? importedData.columns : [...existingData.columns],", "scope": "merged", "scopeKind": "class", "description": "unavailable"}, {"name": "createdAt: new Date().toISOString()", "scope": "card", "scopeKind": "class", "description": "unavailable"}, {"name": "let current = '';", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "id: this.generateId(),", "scope": "card", "scopeKind": "class", "description": "unavailable"}, {"name": "importServiceInstance = new ImportService();", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "let importServiceInstance = null;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "let inQuotes = false;", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"210": "f3ed44b22dde9c597ddeaff1880f8e8d1a7b31af"}]}